
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Scene Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    
    <link rel="stylesheet" href="../../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-richquotes/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../cloud_service/" />
    
    
    <link rel="prev" href="../ipc_panel/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../../pages/prepare.html">
            
                <a href="../../../pages/prepare.html">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../../pages/access.html">
            
                <a href="../../../pages/access.html">
            
                    
                    Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../../pages/biznav.html">
            
                <a href="../../../pages/biznav.html">
            
                    
                    UI Biz Bundle Navigation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../../pages/mall/">
            
                <a href="../../../pages/mall/">
            
                    
                    H5 Mall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../../pages/activator/">
            
                <a href="../../../pages/activator/">
            
                    
                    Device Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../../pages/panel/">
            
                <a href="../../../pages/panel/">
            
                    
                    Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../../pages/ipc_panel/">
            
                <a href="../../../pages/ipc_panel/">
            
                    
                    IPC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../../pages/scene/">
            
                <a href="../../../pages/scene/">
            
                    
                    Scene
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../../../pages/cloud_service/">
            
                <a href="../../../pages/cloud_service/">
            
                    
                    Cloud Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../../../pages/faq/">
            
                <a href="../../../pages/faq/">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../../../pages/message/">
            
                <a href="../../../pages/message/">
            
                    
                    Message Center
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../../../pages/family/">
            
                <a href="../../../pages/family/">
            
                    
                    House Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../../../pages/ota/">
            
                <a href="../../../pages/ota/">
            
                    
                    OTA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="../../../pages/device_detail/">
            
                <a href="../../../pages/device_detail/">
            
                    
                    Device Detail
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../../pages/faq.html">
            
                <a href="../../../pages/faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../../pages/updates.html">
            
                <a href="../../../pages/updates.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../../pages/versions.html">
            
                <a href="../../../pages/versions.html">
            
                    
                    Versions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../SUMMARY.html">
            
                <a href="../../SUMMARY.html">
            
                    
                    3.20.0
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../prepare.html">
            
                <a href="../prepare.html">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../access.html">
            
                <a href="../access.html">
            
                    
                    Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../biznav.html">
            
                <a href="../biznav.html">
            
                    
                    UI Biz Bundle Navigation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.4.1" data-path="../mall/">
            
                <a href="../mall/">
            
                    
                    H5 Mall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.2" data-path="../activator/">
            
                <a href="../activator/">
            
                    
                    Device Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.3" data-path="../panel/">
            
                <a href="../panel/">
            
                    
                    Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.4" data-path="../ipc_panel/">
            
                <a href="../ipc_panel/">
            
                    
                    IPC
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8.4.5" data-path="./">
            
                <a href="./">
            
                    
                    Scene
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.6" data-path="../cloud_service/">
            
                <a href="../cloud_service/">
            
                    
                    Cloud Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.7" data-path="../faq/">
            
                <a href="../faq/">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.8" data-path="../message/">
            
                <a href="../message/">
            
                    
                    Message Center
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../faq.html">
            
                <a href="../faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../updates.html">
            
                <a href="../updates.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="../versions.html">
            
                <a href="../versions.html">
            
                    
                    Versions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../../3_17_0/SUMMARY.html">
            
                <a href="../../../3_17_0/SUMMARY.html">
            
                    
                    3.17.0
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../../../3_17_0/">
            
                <a href="../../../3_17_0/">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../../../3_17_0/pages/prepare.html">
            
                <a href="../../../3_17_0/pages/prepare.html">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../../../3_17_0/pages/access.html">
            
                <a href="../../../3_17_0/pages/access.html">
            
                    
                    Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../../../3_17_0/pages/biznav.html">
            
                <a href="../../../3_17_0/pages/biznav.html">
            
                    
                    UI Biz Bundle Navigation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.4.1" data-path="../../../3_17_0/pages/mall/">
            
                <a href="../../../3_17_0/pages/mall/">
            
                    
                    H5 Mall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4.2" data-path="../../../3_17_0/pages/activator/">
            
                <a href="../../../3_17_0/pages/activator/">
            
                    
                    Device Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4.3" data-path="../../../3_17_0/pages/panel/">
            
                <a href="../../../3_17_0/pages/panel/">
            
                    
                    Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4.4" data-path="../../../3_17_0/pages/ipc_panel/">
            
                <a href="../../../3_17_0/pages/ipc_panel/">
            
                    
                    IPC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4.5" data-path="../../../3_17_0/pages/scene/">
            
                <a href="../../../3_17_0/pages/scene/">
            
                    
                    Scene
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4.6" data-path="../../../3_17_0/pages/cloud_service/">
            
                <a href="../../../3_17_0/pages/cloud_service/">
            
                    
                    Cloud Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4.7" data-path="../../../3_17_0/pages/faq/">
            
                <a href="../../../3_17_0/pages/faq/">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4.8" data-path="../../../3_17_0/pages/message/">
            
                <a href="../../../3_17_0/pages/message/">
            
                    
                    Message Center
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../../../3_17_0/pages/faq.html">
            
                <a href="../../../3_17_0/pages/faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../../../3_17_0/pages/updates.html">
            
                <a href="../../../3_17_0/pages/updates.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../../../3_17_0/pages/versions.html">
            
                <a href="../../../3_17_0/pages/versions.html">
            
                    
                    Versions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Scene</a>
    </h1>
</div>




                    <div style="font-size: 20px; display:flex;justify-content: center;color: red;">This document is deprecated, please go to Tuya Developer Documentation Center to view the latest version: <a href="https://developer.tuya.com/en/docs/app-development">Tuya Smart Doc</a></div>
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#scene-bizbundle"><b>1. </b>Scene BizBundle</a></li><ul><li><span class="title-icon "></span><a href="#features-overview"><b>1.1. </b>Features Overview</a></li><li><span class="title-icon "></span><a href="#integrate"><b>1.2. </b>Integrate</a></li><li><span class="title-icon "></span><a href="#service-protocol"><b>1.3. </b>Service Protocol</a></li><ul><li><span class="title-icon "></span><a href="#provide-service"><b>1.3.1. </b>Provide Service</a></li><li><span class="title-icon "></span><a href="#dependent-services"><b>1.3.2. </b>Dependent Services</a></li></ul><li><span class="title-icon "></span><a href="#guidance"><b>1.4. </b>Guidance</a></li><ul><li><span class="title-icon "></span><a href="#attention"><b>1.4.1. </b>Attention</a></li><li><span class="title-icon "></span><a href="#add-scene"><b>1.4.2. </b>Add Scene</a></li><li><span class="title-icon "></span><a href="#edit-scene"><b>1.4.3. </b>Edit Scene</a></li><li><span class="title-icon "></span><a href="#get-the-list-of-scenes"><b>1.4.4. </b>Get the list of scenes</a></li><li><span class="title-icon "></span><a href="#notificationcenter"><b>1.4.5. </b>NotificationCenter</a></li></ul></ul></ul></div><a href="#scene-bizbundle" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="scene-bizbundle"><a name="scene-bizbundle" class="anchor-navigation-ex-anchor" href="#scene-bizbundle"><i class="fa fa-link" aria-hidden="true"></i></a>1. Scene BizBundle</h1>
<h2 id="features-overview"><a name="features-overview" class="anchor-navigation-ex-anchor" href="#features-overview"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Features Overview</h2>
<p>Smart divides into scene or automation actions.</p>
<p>Scene is a condition that users add actions and it is triggered manually; Automation action is a action set by users, and the set action is automatically executed when the condition is triggered.</p>
<p>The Tuya Cloud allows users to set meteorological or device conditions based on actual scenes in life, and if conditions are met, one or multiple devices will carry out corresponding tasks.</p>
<h2 id="integrate"><a name="integrate" class="anchor-navigation-ex-anchor" href="#integrate"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Integrate</h2>
<p>Add the <code>TuyaSmartSceneBizBundle</code> in the project&apos;s <code>Podfile</code> file and execute the<code>pod update</code> command</p>
<pre class="language-"><code class="lang-ruby">source <span class="token string">&quot;https://github.com/TuyaInc/TuyaPublicSpecs.git&quot;</span>
source <span class="token string">&apos;https://cdn.cocoapods.org/&apos;</span>

target <span class="token string">&apos;your_target_name&apos;</span> <span class="token keyword">do</span>
  pod <span class="token string">&apos;TuyaSmartSceneBizBundle&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;~&gt; 3.20.0&apos;</span>
<span class="token keyword">end</span>
</code></pre>
<p><strong>Note</strong></p>
<p>The weather information in the scene will use location information, which will involve part of Apple&apos;s privacy statement.</p>
<ul>
<li>Add the following permission statement in the project&apos;s <code>info.plist</code>:</li>
</ul>
<pre class="language-"><code>NSLocationWhenInUseUsageDescription
</code></pre><h2 id="service-protocol"><a name="service-protocol" class="anchor-navigation-ex-anchor" href="#service-protocol"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. Service Protocol</h2>
<h3 id="provide-service"><a name="provide-service" class="anchor-navigation-ex-anchor" href="#provide-service"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. Provide Service</h3>
<p>BizBundle  provide services of  <code>TYSmartSceneProtocol.h</code> and <code>TYSmartSceneBizProtocol.h</code> in <code>TYModuleServices</code> component as follows:</p>
<p>The contents of the <code>TYSmartSceneProtocol.h</code> file in the <code>TYModuleServices</code> component are:</p>
<pre class="language-"><code class="lang-objc">
<span class="token keyword">@protocol</span> TYSmartSceneProtocol <span class="token operator">&lt;</span>NSObject<span class="token operator">&gt;</span>
<span class="token comment">/**
 *    Jump to the add new scene page, add new scene or automation
 *
 * @param callback Result callback after creation
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>addAutoScene<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>TuyaSmartSceneModel <span class="token operator">*</span>secneModel<span class="token punctuation">,</span> BOOL addSuccess<span class="token punctuation">)</span><span class="token punctuation">)</span>callback<span class="token punctuation">;</span>
<span class="token comment">/**
 *     Jump to edit scene page, edit specified scene or automation.
 *  Note that before calling this method, you need to call the getSceneListWithHomeId: method of TYSmartSceneBizProtocol to get the list of scenes in the family, so that the scene cache will be generated, and then you can jump into the editing page normally.
 *
 * @param model The scene model object to be edited
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>editScene<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartSceneModel <span class="token operator">*</span><span class="token punctuation">)</span>model<span class="token punctuation">;</span>

<span class="token keyword">@end</span>
</code></pre>
<p>The contents of the <code>TYSmartSceneBizProtocol.h</code> file in the <code>TYModuleServices</code> component are:</p>
<pre class="language-"><code class="lang-objc"><span class="token comment">/**
 * Get a list of scenes, including automation and scenes
 * 
 * @param  homeId 
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>getSceneListWithHomeId<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">)</span>homeId withSuccess<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSArray <span class="token operator">&lt;</span>TuyaSmartSceneModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>scenes<span class="token punctuation">)</span><span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<h3 id="dependent-services"><a name="dependent-services" class="anchor-navigation-ex-anchor" href="#dependent-services"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.2. Dependent Services</h3>
<p>The scene biz bundle rely on the protocol method provided by the <code>TYSmartHomeDataProtocol</code> protocol. Before calling method in &apos;TYSmartSceneBizProtocol&apos; and <code>TYSmartSceneProtocol</code> , the following protocol needs to be implemented:</p>
<h4 id="tysmarthomedataprotocol"><a name="tysmarthomedataprotocol" class="anchor-navigation-ex-anchor" href="#tysmarthomedataprotocol"><i class="fa fa-link" aria-hidden="true"></i></a><a name="tysmarthomedataprotocol" class="plugin-anchor" href="#tysmarthomedataprotocol"><i class="fa fa-link" aria-hidden="true"></i></a>TYSmartHomeDataProtocol</h4>
<p>Provide the current family information required to load the device panel,</p>
<p> <strong>must be implemented</strong></p>
<pre class="language-"><code class="lang-objc"><span class="token comment">/**
 Get the current family. If there is no family, return nil.

 @return TuyaSmartHome
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>TuyaSmartHome <span class="token operator">*</span><span class="token punctuation">)</span>getCurrentHome<span class="token punctuation">;</span>
</code></pre>
<h4 id="tysmarthouseindexprotocol"><a name="tysmarthouseindexprotocol" class="anchor-navigation-ex-anchor" href="#tysmarthouseindexprotocol"><i class="fa fa-link" aria-hidden="true"></i></a><a name="tysmarthouseindexprotocol" class="plugin-anchor" href="#tysmarthouseindexprotocol"><i class="fa fa-link" aria-hidden="true"></i></a>TYSmartHouseIndexProtocol</h4>
<p>Provide the administrator identity information required by the scene biz bundle. You can just return YES to allow all user to edit scene.</p>
<pre class="language-"><code class="lang-objc"><span class="token comment">/**
 * Whether it is the administrator of the current family.
 *
 * @return YES means user&apos;s role in current home is administrator.
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>homeAdminValidation<span class="token punctuation">;</span>
</code></pre>
<h2 id="guidance"><a name="guidance" class="anchor-navigation-ex-anchor" href="#guidance"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Guidance</h2>
<h3 id="attention"><a name="attention" class="anchor-navigation-ex-anchor" href="#attention"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.1. Attention</h3>
<ol>
<li><p>Make sure that the user is logged in before using any interface.</p>
</li>
<li><p>Before using bizbundle, you need to implement the protocol method <code>getCurrentHome</code> in <code>TYSmartHomeDataProtocol</code> and the protocol method <code>homeAdminValidation</code> in <code>TYSmartHouseIndexProtocol</code> first.</p>
</li>
<li><p>To use swift, you need to add the bizbundle header file in the bridge file.</p>
<pre class="language-"><code>#import &lt;TuyaSmartBizCore/TuyaSmartBizCore.h&gt;
#import &lt;TYModuleServices/TYModuleServices.h&gt;
#import &lt;TuyaSmartSceneKit/TuyaSmartSceneModel.h&gt;
</code></pre></li>
</ol>
<p>Objective-C </p>
<pre class="language-"><code class="lang-objc"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>TuyaSmartBizCore<span class="token operator">/</span>TuyaSmartBizCore<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>TYModuleServices<span class="token operator">/</span>TYSmartHomeDataProtocol<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>


<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>registerProtocol <span class="token punctuation">{</span>
    <span class="token comment">// Register the protocol to be implemented</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBizCore sharedInstance<span class="token punctuation">]</span> registerService<span class="token punctuation">:</span><span class="token keyword">@protocol</span><span class="token punctuation">(</span>TYSmartHomeDataProtocol<span class="token punctuation">)</span> withInstance<span class="token punctuation">:</span><span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBizCore sharedInstance<span class="token punctuation">]</span> registerService<span class="token punctuation">:</span><span class="token keyword">@protocol</span><span class="token punctuation">(</span>TYSmartHouseIndexProtocol<span class="token punctuation">)</span> withInstance<span class="token punctuation">:</span><span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Implement protocol method</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>TuyaSmartHome <span class="token operator">*</span><span class="token punctuation">)</span>getCurrentHome <span class="token punctuation">{</span>
    TuyaSmartHome <span class="token operator">*</span>home <span class="token operator">=</span> <span class="token punctuation">[</span>TuyaSmartHome homeWithHomeId<span class="token punctuation">:</span><span class="token string">@&quot;current homeId&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> home<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>homeAdminValidation <span class="token punctuation">{</span>
    <span class="token comment">//Return value according to the actual user role, or directly return YES to allow all users to edit.</span>
    <span class="token keyword">return</span> YES<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swfit </p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">class</span> <span class="token class-name">TYSceneTest</span><span class="token punctuation">:</span> <span class="token builtin">NSObject</span><span class="token punctuation">,</span><span class="token builtin">TYSmartHomeDataProtocol</span><span class="token punctuation">,</span><span class="token builtin">TYSmartHouseIndexProtocol</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">TuyaSmartBizCore</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">registerService</span><span class="token punctuation">(</span><span class="token builtin">TYSmartHomeDataProtocol</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> withInstance<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">TuyaSmartBizCore</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">registerService</span><span class="token punctuation">(</span><span class="token builtin">TYSmartHouseIndexProtocol</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> withInstance<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">getCurrentHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">TuyaSmartHome</span><span class="token operator">!</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> home <span class="token operator">=</span> <span class="token builtin">TuyaSmartHome</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>homeId<span class="token punctuation">:</span> <span class="token number">111</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> home
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">homeAdminValidation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="add-scene"><a name="add-scene" class="anchor-navigation-ex-anchor" href="#add-scene"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.2. Add Scene</h3>
<p>Objective-C </p>
<pre class="language-"><code class="lang-objc"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>TuyaSmartBizCore<span class="token operator">/</span>TuyaSmartBizCore<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>TYModuleServices<span class="token operator">/</span>TYSmartSceneProtocol<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>


<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>gotoAddScene <span class="token punctuation">{</span>
    id<span class="token operator">&lt;</span>TYSmartSceneProtocol<span class="token operator">&gt;</span> impl <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBizCore sharedInstance<span class="token punctuation">]</span> serviceOfProtocol<span class="token punctuation">:</span><span class="token keyword">@protocol</span><span class="token punctuation">(</span>TYSmartSceneProtocol<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>impl1 addAutoScene<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>TuyaSmartSceneModel <span class="token operator">*</span>secneModel<span class="token punctuation">,</span> BOOL addSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift </p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">addScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> impl <span class="token operator">=</span> <span class="token builtin">TuyaSmartBizCore</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token builtin">TYSmartSceneProtocol</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token keyword">as</span><span class="token operator">?</span> <span class="token builtin">TYSmartSceneProtocol</span>
    impl<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">addAutoScene</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">(</span>sceneModel<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token keyword">in</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="edit-scene"><a name="edit-scene" class="anchor-navigation-ex-anchor" href="#edit-scene"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.3. Edit Scene</h3>
<p>Objective-C </p>
<pre class="language-"><code class="lang-objc"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>TuyaSmartBizCore<span class="token operator">/</span>TuyaSmartBizCore<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>TYModuleServices<span class="token operator">/</span>TYSmartSceneProtocol<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>gotoEditScene <span class="token punctuation">{</span>
    id<span class="token operator">&lt;</span>TYSmartSceneProtocol<span class="token operator">&gt;</span> impl <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBizCore sharedInstance<span class="token punctuation">]</span> serviceOfProtocol<span class="token punctuation">:</span><span class="token keyword">@protocol</span><span class="token punctuation">(</span>TYSmartSceneProtocol<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>impl editScene<span class="token punctuation">:</span><span class="token punctuation">(</span>your sceneModel<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift </p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">editScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> impl <span class="token operator">=</span> <span class="token builtin">TuyaSmartBizCore</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token builtin">TYSmartSceneProtocol</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token keyword">as</span><span class="token operator">?</span> <span class="token builtin">TYSmartSceneProtocol</span>
    impl<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">editScene</span><span class="token punctuation">(</span>your scenemodel<span class="token punctuation">)</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="get-the-list-of-scenes"><a name="get-the-list-of-scenes" class="anchor-navigation-ex-anchor" href="#get-the-list-of-scenes"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.4. Get the list of scenes</h3>
<p>Objective-C </p>
<pre class="language-"><code class="lang-objc"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>TuyaSmartBizCore<span class="token operator">/</span>TuyaSmartBizCore<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>TYModuleServices<span class="token operator">/</span>TYSmartSceneBizProtocol<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>getSceneList <span class="token punctuation">{</span>
    id<span class="token operator">&lt;</span>TYSmartSceneBizProtocol<span class="token operator">&gt;</span> impl <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBizCore sharedInstance<span class="token punctuation">]</span> serviceOfProtocol<span class="token punctuation">:</span><span class="token keyword">@protocol</span><span class="token punctuation">(</span>TYSmartSceneBizProtocol<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>impl getSceneListWithHomeId<span class="token punctuation">:</span><span class="token string">&apos;your homeId&apos;</span> withSuccess<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartSceneModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull scenes<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span> _Nonnull error<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift </p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">getSceneList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> impl <span class="token operator">=</span> <span class="token builtin">TuyaSmartBizCore</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token builtin">TYSmartSceneBizProtocol</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token keyword">as</span><span class="token operator">?</span> <span class="token builtin">TYSmartSceneBizProtocol</span>
       impl<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getSceneList</span><span class="token punctuation">(</span>withHomeId<span class="token punctuation">:</span> <span class="token number">111</span><span class="token punctuation">,</span> withSuccess<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>sceneArr<span class="token punctuation">)</span> <span class="token keyword">in</span>

       <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>

      <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="notificationcenter"><a name="notificationcenter" class="anchor-navigation-ex-anchor" href="#notificationcenter"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.5. NotificationCenter</h3>
<p><strong>kNotificationSmartSceneListUpdate</strong></p>
<p>Timing of notification:</p>
<ol>
<li>Added scene successfully</li>
<li>Edit scene successfully</li>
<li>Delete scene successfully ( Bizbundle default scene types are TuyaSmartSceneRecommendTypeNone and TuyaSmartSceneCollectionTypeNone )</li>
</ol>
<p><strong>kNotificationSmartSceneSaved</strong></p>
<p>Timing of notification:</p>
<ol>
<li>Added scene successfully</li>
<li>Edit scene successfully</li>
</ol>
<p><strong>kNotificationSmartSceneRecomDeleted</strong></p>
<p>Timing of notification:</p>
<ol>
<li>Delete scene successfully ( Recommend scene or Collection type )</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../ipc_panel/" class="navigation navigation-prev " aria-label="Previous page: IPC">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../cloud_service/" class="navigation navigation-next " aria-label="Next page: Cloud Service">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Scene","level":"1.8.4.5","depth":3,"next":{"title":"Cloud Service","level":"1.8.4.6","depth":3,"path":"3_20_0/pages/cloud_service/README.md","ref":"./3_20_0/pages/cloud_service/README.md","articles":[]},"previous":{"title":"IPC","level":"1.8.4.4","depth":3,"path":"3_20_0/pages/ipc_panel/README.md","ref":"./3_20_0/pages/ipc_panel/README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["addcssjs","richquotes","prism","-hightlight","anchors","js-sequence-diagram-full@>=0.3.1","splitter","github","anchor-navigation-ex","expandable-chapters-small","pageview-count","language-picker","hide-element"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism.css"],"lang":{"oc":"objectivec","objc":"objectivec","objective-c":"objectivec"},"ignore":[]},"language-picker":{"grid-columns":3},"github":{"url":"https://github.com/TuyaInc/tuyasmart_bizbundle_ios_doc"},"splitter":{},"search":{},"addcssjs":{"css":[],"js":["../scripts/mermaid.min.js","../scripts/index.js"]},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"js-sequence-diagram-full":{},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"richquotes":{},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"pageview-count":{},"expandable-chapters-small":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"3_20_0/pages/scene/README.md","mtime":"2021-03-12T03:17:09.137Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-03-12T03:18:11.324Z"},"basePath":"../../..","book":{"language":"en"}});
        });
    </script>
</div>

        
    
    <script src="../../../../gitbook/gitbook.js"></script>
    <script src="../../../../gitbook/theme.js"></script>
    
        
        <script src="../../../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    
    <script type="text/javascript" src="../../../../scripts/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../../../scripts/index.js"></script>
    

    </body>
</html>

